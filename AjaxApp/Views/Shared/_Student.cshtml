@model IEnumerable<AjaxApp.Models.Student>
@using AjaxApp.Models

<p>
    <button class="btn btn-primary" id="btnCreate">Create New Student</button>
</p>
<table class="table table-hover">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.FirstName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Address)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.FirstName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.LastName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Address)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.Id })
                @Html.ActionLink("Delete", "Delete", new { id = item.Id })
            </td>
        </tr>
    }



</table>

<!-- The Modal -->
<div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
        <div class="modal-header"> 
        <span class="close">&times;</span>
        </div>

        <div id="modalBody"></div>
    </div>

</div>




<script>
    // Get the modal
    var modal = document.getElementById("myModal");

    // Get the button that opens the modal
    //var btn = document.getElementById("myBtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on the button, open the modal
    //btn.onclick = function () {

    //    modal.style.display = "block";

    //}

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
        modal.style.display = "none";

    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    $("#btnCreate").click(function () {
        modal.style.display = "block";
        AddStd();
    });

    $("#edit").click(function () {
        modal.style.display = "block";
        EditStd();
    });

    //Add Student
    function AddStd() {
        $.ajax({
            url: "/Home/Create",
            method: "GET",

            success: function (data) {
                $("div#modalBody").html(data)
            },
            error: function (err) {
                alert("Sorry");
            }
        })
    }

    function EditStd() {

        $.ajax({
            url: "/Home/Edit",
            method: "GET",

            success: function (data) {
                $("div#modalBody").html(data)
                
            },
            error: function (err) {
                alert("Sorry");
            }
        })
    }

</script>